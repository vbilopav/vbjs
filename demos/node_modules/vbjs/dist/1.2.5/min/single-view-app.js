define(["sys/app"],e=>t=>{let n;if(e.queryString=document.location.search?(e=>e.slice(e.indexOf("?")+1).match(/[\w\d%\-!.~'()\*]+=[\w\d%\-!.~'()\*]+/g).map(e=>e.split("=").map(decodeURIComponent)).reduce((e,[t,n])=>Object.assign(e,{[t]:n}),{}))(document.location.search):{},!e.config.view.startsWith("document!")||t&&"app"!==t)n=document.getElementById(t).html("");else{let c=()=>(t=e.config.view.replace("document!",""),(document.getElementById(t)||document.getElementsByName(t)).parentElement);t?(n=document.getElementById(t))||(t=e.config.view.replace("document!",""),n=c()):n=c()}return e.render(e.config.view,n,Object.assign({},e.queryString))});